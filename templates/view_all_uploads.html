{% extends "base.html" %}

{% block content %}
<h2 style="text-align:center; margin-top:30px; color:#fff; text-shadow:2px 2px 6px #000;">
  {{_("ðŸ“‚ All Uploads")}}
</h2>

<style>
.uploads-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 20px;
}

.card {
  width: 300px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.6);
  color: #fff;
  text-align: center;
  transition: transform 0.3s;
}

.card:hover {
  transform: translateY(-5px);
}

.card h5 {
  font-size: 20px;
  margin-bottom: 10px;
  color: #ffeb3b;
  text-shadow: 1px 1px 4px #000;
}

.card p {
  font-size: 14px;
  margin-top: 10px;
}

.card video, .card img {
  width: 100%;
  border-radius: 8px;
  margin-top: 10px;
}

.card .btn {
  display: inline-block;
  margin-top: 10px;
  padding: 8px 15px;
  background-color: #1a8f1a;
  color: #fff;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
}

.card .btn:hover {
  background-color: #126912;
}
</style>

<div class="uploads-container">
  {% for upload in uploads %}
    <div class="card">
      <h5>{{ upload.title }}</h5>

      {% if upload.upload_type == 'video' %}
        <video autoplay muted loop playsinline>
          <source src="{{ url_for('static', filename='uploads/' + upload.filename) }}" type="video/mp4">
        </video>
      {% else %}
        <img src="{{ url_for('static', filename='uploads/' + upload.filename) }}" alt="{{ upload.title }}">
      {% endif %}

      <p>{{_("Uploaded on")}}: {{ upload.created_at.strftime('%d-%m-%Y') }}</p>

      {% if session.get('admin_logged_in') %}
        <a href="{{ url_for('delete_upload', upload_id=upload.id) }}" 
         onclick="return confirm('Are you sure you want to delete this upload?');" 
         class="btn btn-danger">
         {{_("Delete")}}
        </a>
      {% endif %}

    </div>
  {% endfor %}
</div>
{% endblock %}
