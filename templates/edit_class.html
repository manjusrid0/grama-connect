<!-- templates/edit_class.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Edit Class</title>
</head>
<body>
    <h2>Edit Class: {{ cls.title }}</h2>
    <form method="POST" enctype="multipart/form-data">
        <label>Title</label><br>
        <input type="text" name="title" value="{{ cls.title }}" required><br><br>

        <label>Description</label><br>
        <textarea name="description" required>{{ cls.description }}</textarea><br><br>

        <label>Delivery Mode</label><br>
        <select name="delivery_mode" required onchange="toggleFields(this.value)">
            <option value="video_link" {% if cls.class_type == 'video_link' %}selected{% endif %}>Video Link</option>
            <option value="upload_video" {% if cls.class_type == 'upload_video' %}selected{% endif %}>Upload Video</option>
            <option value="offline" {% if cls.class_type == 'offline' %}selected{% endif %}>Offline</option>
        </select><br><br>

        <div id="video_link_input" style="display: none;">
            <label>Video Link:</label><br>
            <input type="url" name="video_link" value="{{ cls.video_url }}"><br><br>
        </div>

        <div id="video_file_input" style="display: none;">
            <label>Upload New Video:</label><br>
            <input type="file" name="video_file"><br><br>
        </div>

        <div id="offline_input" style="display: none;">
            <label>Offline Details:</label><br>
            <textarea name="offline_details">{{ cls.location }}</textarea><br><br>
        </div>

        <button type="submit">Update Class</button>
    </form>

    <script>
        function toggleFields(mode) {
            document.getElementById('video_link_input').style.display = (mode === 'video_link') ? 'block' : 'none';
            document.getElementById('video_file_input').style.display = (mode === 'upload_video') ? 'block' : 'none';
            document.getElementById('offline_input').style.display = (mode === 'offline') ? 'block' : 'none';
        }

        // Initialize on page load
        toggleFields("{{ cls.class_type }}");
    </script>
</body>
</html>