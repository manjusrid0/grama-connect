<!DOCTYPE html>
<html lang="{{ get_locale() }}">
<head>
  <meta charset="UTF-8">
  <title>{{ _("Grama Connect") }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===== BODY ===== */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #f0f7f2;
      color: #2f4f2f;
      overflow-x: hidden;
    }

    /* ===== HEADER ===== */
    header {
      position: sticky;
      top: 0;
      background: rgb(250, 248, 248);
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      z-index: 100;
      border-bottom: 2px solid #a2d5a1;
      padding: 8px 20px; /* smaller header */
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    h1 {
      font-size: 1.8rem;
      color: #2f7a2f;
      margin: 0;
    }

    nav {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    nav a {
      text-decoration: none;
      color: #5c4033;
      font-weight: 500;
      padding: 5px 10px;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    nav a:hover {
      background-color: #2f7a2f;
      color: #fff;
      transform: scale(1.05);
    }

    /* ===== LANGUAGE SELECTOR ===== */
    .language-selector {
      margin-left: 15px;
    }

    .language-selector select {
      padding: 4px 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-weight: 500;
      background-color: #ffffff;
      cursor: pointer;
    }

    /* ===== FLASH MESSAGES ===== */
    .alert {
      position: fixed;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      background: #e0f7e0;
      color: #2f7a2f;
      padding: 12px 22px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      font-weight: 600;
      z-index: 1000;
      animation: fadein 0.5s, fadeout 0.5s 3s;
    }

    @keyframes fadein { from { opacity: 0; top: 50px; } to { opacity: 1; top: 70px; } }
    @keyframes fadeout { from { opacity: 1; top: 70px; } to { opacity: 0; top: 50px; } }
      .marquee-vertical {
    position: fixed;
    right: 0; /* You can change to left:0 if you prefer */
    top: 70px; /* small gap below header */
    width: 280px;
    height: 180px;
    overflow: hidden;
    background: linear-gradient(180deg, #2f7a2f, #5c4033);
    color: #fff;
    border-radius: 10px 0 0 10px;
    font-weight: 600;
    font-size: 1rem;
    padding: 10px;
    z-index: 200;
    box-shadow: -4px 4px 12px rgba(0,0,0,0.2);
  }

  .marquee-track {
    display: flex;
    flex-direction: column;
    animation: scrollVertical 10s linear infinite;
  }

  .marquee-track p {
    margin: 15px 0;
    text-align: center;
  }

  @keyframes scrollVertical {
    0%   { transform: translateY(-100%); }
    50%  { transform: translateY(0); }
    100% { transform: translateY(100%); }
  }

  /* Mobile Adjustments */
  @media (max-width: 768px) {
    .marquee-vertical {
      width: 220px;
      font-size: 0.9rem;
    }
  }
    /* ===== ASSISTANT ===== */
    #assistant-box {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: #ffffff;
      border: 2px solid #2f7a2f;
      border-radius: 15px;
      padding: 12px;
      width: 320px;
      max-height: 260px;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      font-size: 14px;
      display: none;
      z-index: 9999;
    }

    #assistant-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #2f7a2f;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }

    #assistant-btn:hover { transform: scale(1.1); }

    #assistant-log div { margin-bottom: 6px; line-height: 1.4; }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
      h1 { font-size: 1.5rem; }
      nav { flex-wrap: wrap; gap: 8px; }
      .language-selector { margin-left: 0; margin-top: 5px; }
    }
  </style>
</head>
<body onload="greetUser(); addVoiceToAllElements();">

  <!-- Header -->
  <header>
    <div class="header-container">
      <h1>{{ _("Grama Connect") }}</h1>
      <div style="display:flex; align-items:center;">
        <nav>
          <a href="{{ url_for('home') }}">{{ _("Home") }}</a>
          <a href="{{ url_for('user_login') }}">{{ _("Login") }}</a>
          <a href="{{ url_for('register') }}">{{ _("Register") }}</a>
          <a href="{{ url_for('admin_login') }}">{{ _("Admin") }}</a>
          <a href="{{ url_for('about') }}">{{ _("About Us") }}</a>
          <a href="{{ url_for('logout') }}">{{ _("Logout") }}</a>
        </nav>
        <div class="language-selector">
          <form>
            <select onchange="location = this.value;">
              {% for code, name in config['LANGUAGES'].items() %}
                <option value="{{ url_for('set_language', language=code) }}" {% if code == get_locale() %} selected {% endif %}>{{ name }}</option>
              {% endfor %}
            </select>
          </form>
        </div>
      </div>
    </div>
    
     
</div>
  </header>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for msg in messages %}
        <div class="alert">{{ msg }}</div>
        <script> speak("{{ msg }}"); </script>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- Main Content -->
  {% block content %}{% endblock %}

  <!-- Assistant -->
  <div id="assistant-box"><div id="assistant-log"></div></div>
  <button id="assistant-btn" onclick="toggleAssistant()">ðŸŽ¤</button>

  <script>
    // Your original assistant JS code
  </script>
</body>
</html>
<<<<<<< HEAD
<script>
let recognizing = false;
let recognition;
let assistantLog = document.getElementById('assistant-log');
let assistantBox = document.getElementById('assistant-box');

function toggleAssistant() {
  if (!recognizing) {
    startRecognition();
    assistantBox.style.display = 'block';
    logAssistant("Listening...");
  } else {
    stopRecognition();
    assistantBox.style.display = 'none';
  }
}

function logAssistant(msg) {
  if (assistantLog) {
    assistantLog.innerHTML += `<div>${msg}</div>`;
    assistantLog.scrollTop = assistantLog.scrollHeight;
  }
}

function speak(text) {
  if ('speechSynthesis' in window) {
    let utter = new SpeechSynthesisUtterance(text);
    window.speechSynthesis.speak(utter);
  }
}

function startRecognition() {
  if (!('webkitSpeechRecognition' in window)) {
    logAssistant("Sorry, your browser doesn't support speech recognition.");
    return;
  }
  recognition = new webkitSpeechRecognition();
  recognition.lang = 'en-IN';
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.onstart = function() {
    recognizing = true;
    logAssistant("Voice assistant activated. Please speak...");
  };
  recognition.onresult = function(event) {
    let transcript = event.results[0][0].transcript.trim().toLowerCase();
    logAssistant(`<b>You:</b> ${transcript}`);
    handleVoiceCommand(transcript);
    recognizing = false;
    assistantBox.style.display = 'none';
  };
  recognition.onerror = function(event) {
    logAssistant("Error: " + event.error);
    recognizing = false;
    assistantBox.style.display = 'none';
  };
  recognition.onend = function() {
    recognizing = false;
    assistantBox.style.display = 'none';
  };
  recognition.start();
}

function stopRecognition() {
  if (recognition) recognition.stop();
  recognizing = false;
}

function handleVoiceCommand(transcript) {
  // Add more commands as needed
  if (transcript.includes("sell product") || transcript.includes("go to sell product")) {
    speak("Redirecting to Sell Product page.");
    window.location.href = "{{ url_for('sell') }}";
  } else if (transcript.includes("dashboard")) {
    speak("Redirecting to Dashboard.");
    window.location.href = "{{ url_for('dashboard') }}";
  } else if (transcript.includes("profile")) {
    speak("Redirecting to Profile.");
    window.location.href = "{{ url_for('profile') }}";
  } else if (transcript.includes("logout")) {
    speak("Logging you out.");
    window.location.href = "{{ url_for('logout') }}";
  } else if (transcript.includes("home")) {
    speak("Going to Home page.");
    window.location.href = "{{ url_for('home') }}";
  } else if (transcript.includes("login")) {
    speak("Redirecting to Login page.");
    window.location.href = "{{ url_for('user_login') }}";
  } else if (transcript.includes("register")) {
    speak("Redirecting to Register page.");
    window.location.href = "{{ url_for('register') }}";
  } else if (transcript.includes("about")) {
    speak("Redirecting to About Us page.");
    window.location.href = "{{ url_for('about') }}";
  } else {
    speak("Sorry, I didn't understand. Please try again.");
    logAssistant("Sorry, I didn't understand. Try saying: 'Go to sell product', 'Go to dashboard', etc.");
  }
}
</script>
=======
>>>>>>> a6576c51c1a1237b599dd8a15cc2c3df7929b838
