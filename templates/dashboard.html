{% extends 'base.html' %}

{% block content %}
<style>
body {
  background-image: url("{{ url_for('static', filename='uploads/field3.jpg') }}");
  background-size: cover;
  background-color: rgba(0, 0, 0, 0.5);

  background-position: center;
  background-repeat: no-repeat;
  color: rgb(247, 242, 242);
  overflow-y: scroll;
  font-family: 'Segoe UI', sans-serif;
}


body::-webkit-scrollbar {
  width: 10px;
}
body::-webkit-scrollbar-thumb {
  background-color: #888;
  border-radius: 6px;
}
body::-webkit-scrollbar-thumb:hover {
  background-color: #555;
}


.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
  gap: 20px;
  margin-top: 30px;
}


.card {
  border: 1px solid #06093b;
  padding: 15px;
  background-color: rgba(0, 0, 0, 0.5);
  
  border-radius: 10px;
  text-align: center;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
}
.card h3, .card h5 {
  margin-bottom: 10px;
  font-weight: bold;
}
.card p {
  color: #e4cccc;
}
.btn {
  display: inline-block;
  padding: 10px 15px;
  background: #047413;
  color: rgb(208, 245, 107);
  text-decoration: none;
  border-radius: 5px;
  cursor: pointer;
}
.btn:hover {
  background: #07070a;
}
</style>

<h2>Welcome,{{ current_user.username }}</h2>
<p>{{_("This is your ")}}<strong>{{_("Grama Connect")}}</strong> {{_("dashboard.")}}</p>

<div class="dashboard-grid">
  
  <div class="card">
    <h3>{{_("ğŸ‘¤ Profile")}}</h3>
    <p>{{_("View and manage your profile details.")}}</p>
    <a href="{{ url_for('profile') }}" class="btn voice-action">{{_("Go to Profile")}}</a>
  </div>

  
  <div class="card">
    <h3>{{_("ğŸ›’ Sell a Product")}}</h3>
    <p>{{_("Post your handmade or local product for sale.")}}</p>
    <a href="{{ url_for('sell') }}" class="btn voice-action">{{_("Sell Now")}}</a>
  </div>

  
  <div class="card">
    <h3>{{_("ğŸ› Buy Products")}}</h3>
    <p>{{_("Browse and buy available local products.")}}</p>
    <a href="{{ url_for('buy') }}" class="btn voice-action">{{_("View Products")}}</a>
  </div>


  <div class="card">
    <h3>{{_("ğŸ“š Post a Training / Class")}}</h3>
    <p>{{_("Share educational or vocational training sessions.")}}</p>
    <a href="{{ url_for('post_class') }}" class="btn voice-action">{{_("Post Class")}}</a>
  </div>


  <div class="card">
    <h3>{{_("ğŸ“ Join Available Classes")}}</h3>
    <p>{{_("Find and join classes posted by other users.")}}</p>
    <a href="{{ url_for('join_class') }}" class="btn voice-action">{{_("Join Class")}}</a>
  </div>


  <div class="card">
    <h3>{{_("ğŸ’¼ Jobs")}}</h3>
    <p>{{_(" post local job opportunities.")}}</p>
    <a href="{{ url_for('view_jobs') }}" class="btn voice-action">{{ _("Post Job") }}</a>

  </div>

  <div class="card">
    <h3>{{_("apply jobs")}}</h3>
    <p>{{_("Explore local job opportunities.")}}</p>
    <a href="{{ url_for('user_view_jobs') }}" class="btn voice-action">{{_("Apply job")}}</a>
  </div>


  <div class="card">
    <h5>{{_("ğŸ“ˆ Income Estimator")}}</h5>
    <p>{{_("Estimate your monthly income based on your skill and working hours.")}}</p>
    <a href="{{ url_for('income_estimator') }}" class="btn voice-action">{{_("Try Now")}}</a>
  </div>

  
  <div class="card">
    <h5>{{_("ğŸ§  Self-Employment Ideas")}}</h5>
    <p>{{_("Explore local business ideas and tutorials that need minimal investment.")}}</p>
    <a href="{{ url_for('self_employment_board') }}" class="btn voice-action">{{_("Explore")}}</a>
  </div>

  
  <div class="card">
    <h5>{{_("ğŸ“ Free Skill Courses")}}</h5>
    <p>{{_("Access free courses from NPTEL, Skill India, and more.")}}</p>
    <a href="{{ url_for('free_courses') }}" class="btn voice-action">{{_("View Courses")}}</a>
  </div>


  <div class="card">
    <h5>{{_("ğŸ¤ Request Guidance")}}</h5>
    <p>{{_("Need help with self-employment? Send a request for support.")}}</p>
    <a href="{{ url_for('request_mentorship') }}" class="btn voice-action">{{_("Request Help")}}</a>
  </div>
    <div class="uploads-container" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center; margin-top:20px;">
     {% for upload in uploads %}
      <div class="card" style="width:300px; background: rgba(0,0,0,0.7); border-radius:12px; padding:15px; box-shadow:0 5px 15px rgba(0,0,0,0.6); color:#fff;">
      
       <h5>{{ upload.title }}</h5>
      
       {% if upload.upload_type == 'video' %}
        <video width="100%" autoplay muted loop playsinline style="border-radius:8px;">
          <source src="{{ url_for('static', filename='uploads/' + upload.filename) }}" type="video/mp4">
        </video>
       {% else %}
        <img src="{{ url_for('static', filename='uploads/' + upload.filename) }}" alt="{{ upload.title }}" style="width:100%; border-radius:8px;">
       {% endif %}
      
       <p style="margin-top:10px;">
        {{_("Uploaded on")}}: {{ upload.created_at.strftime('%d-%m-%Y') }}
       </p>
      
       {% if session.get('admin_logged_in') %}
        <a href="{{ url_for('delete_upload', upload_id=upload.id) }}" class="btn" style="background:#d32f2f; color:#fff;">{{_("Delete")}}</a>
       {% endif %}
      </div>
      {% endfor %}
    </div>

</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const selectedLanguage = "{{ get_locale() }}";
    const speak = (text) => {
      const utterance = new SpeechSynthesisUtterance(text);
      const voices = speechSynthesis.getVoices();
      if (selectedLanguage === 'ta') {
        utterance.voice = voices.find(v => v.lang.includes('ta'));
        utterance.lang = 'ta-IN';
      } else {
        utterance.voice = voices.find(v => v.lang === 'en-US') || voices[0];
        utterance.lang = 'en-US';
      }
      speechSynthesis.speak(utterance);
    };

    document.querySelectorAll('.voice-action').forEach(btn => {
      btn.addEventListener('click', () => {
        const label = btn.innerText.trim();
        const msg = selectedLanguage === 'ta'
          ? label + ' à®ªà®Ÿà¯à®Ÿà®©à¯ à®•à®¿à®³à®¿à®•à¯ à®šà¯†à®¯à¯à®¯à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯'
          : 'You clicked: ' + label;
        speak(msg);
      });
    });
  });
</script>
{% endblock %}
